<!DOCTYPE html>
<html>
<head>
    <title>ComfyUI Model Manager</title>
    <style>
        body { 
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .info-box {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        .download-btn {
            background-color: #dc3545 !important;
        }
        .download-btn:hover {
            background-color: #c82333 !important;
        }
        .status { 
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background-color: #dff0d8; }
        .error { background-color: #f2dede; }
        button {
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            border: none;
            background-color: #007bff;
            color: white;
            cursor: pointer;
        }
        button:hover { background-color: #0056b3; }
    </style>
</head>
<body>
    <h1>ComfyUI Model Manager</h1>
    
    <div>
        <h2>Actions</h2>
        <div class="info-box">
            <p><strong>Test Mode:</strong> Use minimal downloads to verify setup (recommended for testing)</p>
            <p><strong>Warning:</strong> Downloading models requires significant disk space (~10GB+)</p>
        </div>
        <form method="POST" onsubmit="return confirmDownload(this)">
            <button type="submit" name="action" value="scan">Scan Repositories</button>
            <button type="submit" name="action" value="setup">Setup Directories</button>
            <button type="submit" name="action" value="download" class="download-btn">Download Models</button>
            <input type="checkbox" id="test_mode" name="test_mode" checked>
            <label for="test_mode">Test Mode</label>
        </form>
    </div>

    {% if message %}
    <div class="status {% if error %}error{% else %}success{% endif %}">
        {{ message }}
    </div>
    {% endif %}

    {% if summary %}
    <div>
        <h2>Run Summary</h2>
        <pre>{{ summary }}</pre>
    </div>
    {% endif %}
<script>
function confirmDownload(form) {
    if (form.action.value === 'download' && !form.test_mode.checked) {
        return confirm('Warning: You are about to download the full model set which requires significant disk space. Continue?');
    }
    return true;
}
</script>
</body>
</html>
